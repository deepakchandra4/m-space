<!DOCTYPE html>
<html lang="en" class="light scroll-smooth" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <title>
      M-Space - Real Estate
    </title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Tailwind CSS Saas & Software Landing Page Template"
    />
    <meta
      name="keywords"
      content="agency, application, business, clean, creative, cryptocurrency, it solutions, modern, multipurpose, nft marketplace, portfolio, saas, software, tailwind css"
    />

    <meta name="version" content="2.3.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico" />

    <!-- Css -->
    <link href="assets/libs/tobii/css/tobii.min.css" rel="stylesheet" />
    <!-- Main Css -->
    <link href="assets/libs/simplebar/simplebar.min.css" rel="stylesheet" />
    <link
      href="assets/libs/%40mdi/font/css/materialdesignicons.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link rel="stylesheet" href="assets/css/tailwind.min.css" />
  </head>

  <body
    class="font-body text-base text-black dark:text-white dark:bg-slate-900"
  >
    <!-- Loader Start -->
    <!-- <div id="preloader">
            <div id="status">
                <div class="spinner">
                    <div class="double-bounce1"></div>
                    <div class="double-bounce2"></div>
                </div>
            </div>
        </div> -->
    <!-- Loader End -->

    <div class="page-wrapper toggled">
      <!-- sidebar-wrapper -->
      <nav id="sidebar" class="sidebar-wrapper sidebar-dark">
        <div class="sidebar-content">
          <div class="sidebar-brand">
            <a href="index.html"
              ><img src="assets/images/logo-light.png" alt=""
            /></a>
          </div>

          <ul
            class="sidebar-menu border-t border-white/10"
            data-simplebar=""
            style="height: calc(100% - 70px)"
          >
            <li>
              <a href="index.html"
                ><i class="mdi mdi-chart-bell-curve-cumulative me-2"></i
                >Dashboard</a
              >
            </li>

            <li>
              <a href="explore-property.html"
                ><i class="mdi mdi-home-city me-2"></i>Explore Properties</a
              >
            </li>
            <li>
              <a href="add-property.html"
                ><i class="mdi mdi-home-plus me-2"></i>Add Properties</a
              >
            </li>
            <li>
              <a href="property-list.html"
                ><i class="mdi mdi-home-plus me-2"></i>Property List</a
              >
            </li>
          </ul>
          <!-- sidebar-menu  -->
        </div>
      </nav>
      <!-- sidebar-wrapper  -->

      <!-- Start Page Content -->
      <main class="page-content bg-gray-50 dark:bg-slate-800">
        <div id="property-detail" class="container-fluid relative px-3">
          <div class="layout-specing">
            <div class="md:flex mt-4">
              <div class="lg:w-1/2 md:w-1/2 p-1">
                <div
                  class="group relative overflow-hidden rounded-md shadow dark:shadow-gray-700"
                >
                  <img id="main-image" src="" alt="Property Main Image" />
                  <div
                    class="absolute inset-0 group-hover:bg-slate-900/70 duration-500 ease-in-out"
                  ></div>
                  <div
                    class="absolute top-1/2 -translate-y-1/2 start-0 end-0 text-center invisible group-hover:visible"
                  >
                    <a
                      id="lightbox-link"
                      href=""
                      class="btn btn-icon bg-green-600 hover:bg-green-700 text-white rounded-full lightbox"
                    >
                      <i class="mdi mdi-camera-outline"></i>
                    </a>
                  </div>
                </div>
              </div>

              <div class="lg:w-1/2 md:w-1/2">
                <div class="flex" id="image-thumbnails">
                  <!-- Thumbnails will be populated dynamically here -->
                </div>
              </div>
            </div>
            <!-- End flex -->

            <div class="grid lg:grid-cols-12 md:grid-cols-2 gap-6 mt-6">
              <div class="lg:col-span-8">
                <div
                  class="bg-white dark:bg-slate-900 p-6 rounded-md shadow dark:shadow-gray-700"
                >
                  <h4 id="property-location" class="text-2xl font-medium"></h4>
                  <ul class="py-6 flex items-center list-none">
                    <li class="flex items-center lg:me-6 me-4">
                      <i
                        class="mdi mdi-arrow-expand-all lg:text-3xl text-2xl me-2 text-green-600"
                      ></i>
                      <span id="property-squarefeet" class="lg:text-xl"></span>
                    </li>
                    <li class="flex items-center lg:me-6 me-4">
                      <i
                        class="mdi mdi-bed lg:text-3xl text-2xl me-2 text-green-600"
                      ></i>
                      <span id="property-beds" class="lg:text-xl"></span>
                    </li>
                    <li class="flex items-center">
                      <i
                        class="mdi mdi-shower lg:text-3xl text-2xl me-2 text-green-600"
                      ></i>
                      <span id="property-baths" class="lg:text-xl"></span>
                    </li>
                  </ul>
                  <p id="property-description" class="text-slate-400"></p>
                  <p class="text-slate-400 mt-4" id="property-description2"></p>
                  <p class="text-slate-400 mt-4" id="property-description3"></p>

                  <div class="w-full leading-[0] border-0 mt-6">
                    <iframe
                      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d28470.22727957637!2d81.06441554999998!3d26.878780457998392!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x399958aa9da50cb7%3A0x8f5a1f4d75d0d691!2sShri%20Ramswaroop%20College%20Of%20Engineering%20and%20Management!5e0!3m2!1sen!2sin!4v1732128540899!5m2!1sen!2sin"
                      width="600"
                      height="450"
                      style="border: 0"
                      allowfullscreen=""
                      loading="lazy"
                      referrerpolicy="no-referrer-when-downgrade"
                    ></iframe>
                  </div>
                </div>
              </div>

              <div class="lg:col-span-4">
                <div
                  class="rounded-md bg-white dark:bg-slate-900 shadow dark:shadow-gray-700"
                >
                  <div class="p-6">
                    <h5 class="text-2xl font-medium">Price:</h5>
                    <div class="flex justify-between items-center mt-4">
                      <span
                        id="property-price"
                        class="text-xl font-medium"
                      ></span>
                      <span
                        id="property-status"
                        class="bg-green-600/10 text-green-600 text-sm px-2.5 py-0.75 rounded h-6"
                      ></span>
                    </div>
                  </div>

                  <div class="flex">
                    <div class="p-1 w-1/2">
                      <a
                        href=""
                        id="book-now"
                        class="btn bg-green-600 hover:bg-green-700 text-white rounded-md w-full"
                        >Book Now</a
                      >
                    </div>
                    <div class="p-1 w-1/2">
                      <a
                        href=""
                        id="offer-now"
                        class="btn bg-green-600 hover:bg-green-700 text-white rounded-md w-full"
                        >Offer Now</a
                      >
                    </div>
                  </div>
                </div>

                <div class="mt-12 text-center">
                  <h3
                    class="mb-6 text-xl leading-normal font-medium text-black dark:text-white"
                  >
                    Have Question ? Get in touch!
                  </h3>
                  <div class="mt-6">
                    <a
                      href="contact.html"
                      class="btn bg-transparent hover:bg-green-600 border border-green-600 text-green-600 hover:text-white rounded-md"
                    >
                      <i class="mdi mdi-phone align-middle me-2"></i> Contact us
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <!-- End Content -->
          </div>
        </div>

        <script>
          async function fetchPropertyDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const propertyId = urlParams.get("id"); // 'id' is the query parameter in the URL
            console.log(propertyId); 
            try {
              const response = await fetch(
                `http://localhost/m-space/backend/public/getPropertyById.php?id=${propertyId}`
              );
              const data = await response.json();
              console.log("Property data fetched:", data); // Check the data in the console

              // Access the first property in the array
              const property = data[0];

              const container = document.getElementById("property-detail");
              if (!container) {
                console.error("Element with ID 'property-detail' not found.");
                return;
              }

              // Ensure 'images' is an array
              let imageUrls = [];
              if (typeof property.images === "string") {
                imageUrls = property.images.split(","); // Convert string of image URLs into an array
              } else if (Array.isArray(property.images)) {
                imageUrls = property.images; // If it's already an array
              } // Assuming images is a comma-separated string

              // Update the main image
              const mainImage = document.getElementById("main-image");
              mainImage.src = `http://localhost/m-space/backend/public/${imageUrls[0].trim()}`;

              // Update the lightbox link
              const lightboxLink = document.getElementById("lightbox-link");
              lightboxLink.href = `http://localhost/m-space/backend/public/${imageUrls[0].trim()}`;

              // Populate image thumbnails
              const imageThumbnails =
                document.getElementById("image-thumbnails");
              imageThumbnails.innerHTML = imageUrls
                .map(
                  (imageUrl) => `
      <div class="w-full p-1"> <!-- Full width for each thumbnail -->
        <div class="group relative overflow-hidden rounded-md shadow dark:shadow-gray-700 h-full"> <!-- Ensure it fills the div height -->
          <img 
            src="http://localhost/m-space/backend/public/${imageUrl.trim()}" 
            alt="Property Image"
            class="w-full h-full object-fill"  <!-- Stretch and fill the container -->
          />
          <div class="absolute inset-0 group-hover:bg-slate-900/70 duration-500 ease-in-out"></div>
          <div class="absolute top-1/2 -translate-y-1/2 start-0 end-0 text-center invisible group-hover:visible">
            <a href="http://localhost/m-space/backend/public/${imageUrl.trim()}" class="btn btn-icon bg-green-600 hover:bg-green-700 text-white rounded-full lightbox">
              <i class="mdi mdi-camera-outline"></i>
            </a>
          </div>
        </div>
      </div>
              `
                )
                .join("");

              // Update property details
              document.getElementById("property-location").textContent =
                property.location;
              document.getElementById(
                "property-squarefeet"
              ).textContent = `${property.squarefeet} sqf`;
              document.getElementById(
                "property-beds"
              ).textContent = `${property.beds} Beds`;
              document.getElementById(
                "property-baths"
              ).textContent = `${property.baths} Baths`;
              document.getElementById("property-description").textContent =
                property.description;
              document.getElementById("property-description2").textContent =
                property.description2 || "";
              document.getElementById("property-description3").textContent =
                property.description3 || "";

              // Update price and status
              document.getElementById(
                "property-price"
              ).textContent = `$ ${property.price}`;
              document.getElementById("property-status").textContent =
                property.status;

              // Set Google Maps iframe src
              document.getElementById(
                "property-map"
              ).src = `https://www.google.com/maps/embed/v1/place?key=YOUR_GOOGLE_MAPS_API_KEY&q=${encodeURIComponent(
                property.location
              )}`;

              // Update Book Now and Offer Now links if needed
              document.getElementById(
                "book-now"
              ).href = `/book-now/${propertyId}`;
              document.getElementById(
                "offer-now"
              ).href = `/offer-now/${propertyId}`;
            } catch (error) {
              console.error("Error fetching property details:", error);
            }
          }

          document.addEventListener("DOMContentLoaded", fetchPropertyDetails);
        </script>

        <!--end container-->

        <!-- Footer Start -->
        <footer
          class="shadow dark:shadow-gray-700 bg-white dark:bg-slate-900 px-6 py-4"
        >
          <div class="container-fluid">
            <div class="grid grid-cols-1">
              <div class="sm:text-start text-center mx-md-2"></div>
              <!--end col-->
            </div>
            <!--end grid-->
          </div>
          <!--end container-->
        </footer>
        <!--end footer-->
        <!-- End -->
      </main>
      <!--End page-content" -->
    </div>
    <!-- page-wrapper -->

    <!-- JAVASCRIPTS -->
    <script src="assets/libs/tobii/js/tobii.min.js"></script>
    <script src="assets/libs/feather-icons/feather.min.js"></script>
    <script src="assets/libs/simplebar/simplebar.min.js"></script>
    <script src="assets/js/plugins.init.js"></script>
    <script src="assets/js/app.js"></script>
    <!-- JAVASCRIPTS -->
  </body>
</html>
